# æè¿°ï¼š
desc 'ä½¿ç”¨ Manager è¿™ä¸ªèˆªé“, å¯ä»¥å¿«é€Ÿçš„å¯¹è‡ªå·±çš„ç§æœ‰åº“, è¿›è¡Œå‡çº§ç»´æŠ¤'

# ä½¿ç”¨æ–¹æ³• ï¼š fastlane Manager 

# æœ¬èˆªé“åï¼šManager
lane :Manager do |options|

# options:ä¼ è¿›æ¥çš„å‚æ•°ï¼Œåé¢çš„tagå’Œtargetæ˜¯å¯¹åº”çš„å­—æ®µ
# tagName = options[:tag]
# targetName = options[:target]
# isSource = options[:IS_SOURCE]
msg = options[:msg]


# å…·ä½“è¿™ä¸ªå··é“ä¸Šé¢æ‰§è¡Œå“ªäº›è¡Œä¸º

# 1. pod install
# cocoapods(
# clean: true,
# podfile: "./Example/Podfile"
# )

# 2. git add .
git_add(path: ".")
#    git commit -m 'xxx'
git_commit(path: ".", message: msg)
#    git push origin master
push_to_git_remote


# # éªŒè¯tagæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨, åº”è¯¥åˆ é™¤æœ¬åœ°æ ‡ç­¾å’Œè¿œç¨‹æ ‡ç­¾
# #if åˆ¤æ–­æ ‡ç­¾æ˜¯å¦å­˜åœ¨
# #    æ‰§è¡Œåˆ é™¤æœ¬åœ°/è¿œç¨‹æ ‡ç­¾
# #end
# if git_tag_exists(tag: tagName)
#     UI.message("å‘ç°tag:#{tagName} å·²ç»å­˜åœ¨, å³å°†æ‰§è¡Œ, åˆ é™¤åŠ¨ä½œ ğŸš€")
#     remove_tag(tag: tagName)
# else	
# 	UI.message("tag:#{tagName} ä¸å­˜åœ¨, å¼€å§‹æäº¤ ğŸš€")
# end


# # 3. git tag æ ‡ç­¾åç§°
# add_git_tag(
# tag: tagName
# )
# #    git push --tags
# push_git_tags


# 4. pod spec lint (æ³¨æ„è¦æ·»åŠ å…¬ã€ç§ä»“åº“)
# pod_lib_lint(IS_SOURCE:1,allow_warnings: true, sources: ["https://gitee.com/LFCoding/FreemanStaffSpecs","https://github.com/CocoaPods/Specs"])
#    pod repo push XXXX xxx.podspec (æ³¨æ„è¦æ·»åŠ å…¬ã€ç§ä»“åº“)
# pod_push_Custome(IS_SOURCE:isSource,path: "#{targetName}.podspec", repo: "FreemanStaffSpec", allow_warnings: true, sources: ["https://gitee.com/LFCoding/FreemanStaffSpecs","https://github.com/CocoaPods/Specs"])


end
